<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hor√≥scopo</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <a class="btn" href="index.html">‚Üê Volver</a>
      <div class="small" id="date"></div>
    </div>

    <article class="card" id="content">
      Cargando‚Ä¶
    </article>

    <footer class="footer">
      ¬© <span id="y"></span> MiHoroscopoHoy.com
    </footer>
  </div>

  <script>
    // 1) Obtener el signo desde la URL (?s=aries)
    const params = new URLSearchParams(location.search);
    const sign = (params.get('s') || '').toLowerCase();

    // 2) Mapa para normalizar slugs del JSON demo
    // (tenemos "aries" y "tauro" en el JSON de prueba)
    const NORMALIZE = {
      'aries':'aries',
      'tauro':'tauro',
      'g√©minis':'geminis','geminis':'geminis',
      'c√°ncer':'cancer','cancer':'cancer',
      'leo':'leo','virgo':'virgo','libra':'libra',
      'escorpio':'escorpio','sagitario':'sagitario',
      'capricornio':'capricornio','acuario':'acuario','piscis':'piscis'
    };

    const DISPLAY = {
      'aries':['Aries','‚ôàÔ∏è'],'tauro':['Tauro','‚ôâÔ∏è'],'geminis':['G√©minis','‚ôäÔ∏è'],
      'cancer':['C√°ncer','‚ôãÔ∏è'],'leo':['Leo','‚ôåÔ∏è'],'virgo':['Virgo','‚ôçÔ∏è'],
      'libra':['Libra','‚ôéÔ∏è'],'escorpio':['Escorpio','‚ôèÔ∏è'],'sagitario':['Sagitario','‚ôêÔ∏è'],
      'capricornio':['Capricornio','‚ôëÔ∏è'],'acuario':['Acuario','‚ôíÔ∏è'],'piscis':['Piscis','‚ôìÔ∏è']
    };

    const slug = NORMALIZE[sign];
    const [name, emoji] = DISPLAY[slug] || ['Signo','‚≠ê'];

    // 3) Mostrar fecha (hoy) y a√±o en footer
    const today = new Date();
    document.getElementById('date').textContent =
      today.toLocaleDateString('es-MX',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
    document.getElementById('y').textContent = today.getFullYear();

    // 4) Cargar el JSON de prueba (fecha fija por ahora)
    const DATA_FILE = 'data/2025-09-29.json';

    fetch(DATA_FILE).then(r => r.json()).then(data => {
      const d = data[slug];
      const el = document.getElementById('content');

      if (!d) {
        el.innerHTML = `<h2 class="title">${emoji} ${name}</h2>
                        <p class="small">A√∫n no hay texto demo para este signo. Prueba con Aries o Tauro üôÇ</p>`;
        return;
      }

      el.innerHTML = `
        <h2 class="title">${emoji} ${name}</h2>
        <p class="small">${d.one_liner}</p>
        <div class="hr"></div>
        <p><strong>Amor:</strong> ${d.sections.love}</p>
        <p><strong>Trabajo:</strong> ${d.sections.work}</p>
        <p><strong>Energ√≠a:</strong> ${d.sections.energy}</p>
        <p><strong>Tip sistema nervioso:</strong> ${d.sections.nervous_system_tip}</p>
        <div class="hr"></div>
        <p class="small">Color de la suerte: <strong>${d.lucky_color}</strong> ¬∑ N√∫mero: <strong>${d.lucky_number}</strong></p>
        <p class="small"><em>Mantra:</em> ‚Äú${d.mantra}‚Äù</p>
      `;
    }).catch(() => {
      document.getElementById('content').textContent = 'No se pudo cargar el archivo de datos.';
    });
  </script>
</body>
</html>
